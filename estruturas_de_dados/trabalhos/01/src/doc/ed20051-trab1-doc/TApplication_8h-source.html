<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Estrutura de Dados - Trabalho 1: TApplication.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Gerado por Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="main.html">Página&nbsp;Principal</a> | <a class="qindex" href="hierarchy.html">Hierarquia&nbsp;de&nbsp;Classes</a> | <a class="qindex" href="classes.html">Lista&nbsp;Alfabética</a> | <a class="qindex" href="annotated.html">Estruturas&nbsp;de&nbsp;Dados</a> | <a class="qindex" href="files.html">Lista&nbsp;de&nbsp;Arquivos</a> | <a class="qindex" href="functions.html">Campos&nbsp;de&nbsp;Dados</a></div>
<h1>TApplication.h</h1><pre class="fragment"><div>00001 <span class="comment">/*******************************************************</span>
00002 <span class="comment"> *              Estrutura de Dados                     *</span>
00003 <span class="comment"> *******************************************************</span>
00004 <span class="comment"> * Trabalho 1                                          *</span>
00005 <span class="comment"> * Professor: Fabrício V. Matos                        *</span>
00006 <span class="comment"> *******************************************************</span>
00007 <span class="comment"> * Aluno: Reinaldo de Souza Junior                     *</span>
00008 <span class="comment"> * Licensa: GPL vs2.0 [ veja /docs/LICENSE.txt ]       *</span>
00009 <span class="comment"> *******************************************************/</span>
00010  
00018 <span class="preprocessor">#ifndef TApplication_H</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#define TApplication_H</span>
00020 <span class="preprocessor"></span>
00021 <span class="preprocessor">#include "TError.h"</span>
00022 <span class="preprocessor">#include "TEngineTHashTable.h"</span>
00023 <span class="preprocessor">#include "TEngineTList.h"</span>
00024 <span class="preprocessor">#include "TEngineTQueue.h"</span>
00025 <span class="preprocessor">#include "TEngineTSortedList.h"</span>
00026 <span class="preprocessor">#include "TEngineTStack.h"</span>
00027 <span class="preprocessor">#include "Pessoa.h"</span>
00028 <span class="preprocessor">#include &lt;iostream&gt;</span> 
00029 <span class="preprocessor">#include &lt;cstdio&gt;</span>
00030 <span class="preprocessor">#include &lt;cmath&gt;</span> 
00031 
00032 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00033 
<a name="l00037"></a><a class="code" href="classTApplication.html">00037</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classTApplication.html">TApplication</a> {
<a name="l00041"></a><a class="code" href="classTApplication.html#y5">00041</a>         <span class="keyword">enum</span> <a class="code" href="classTApplication.html#y5">tipo_estrutura</a>
00042         {
00043                 <a class="code" href="classTApplication.html#y5y0">L</a>,      
00044                 <a class="code" href="classTApplication.html#y5y1">SL</a>,     
00045                 <a class="code" href="classTApplication.html#y5y2">S</a>,      
00046                 <a class="code" href="classTApplication.html#y5y3">Q</a>,      
00047                 <a class="code" href="classTApplication.html#y5y4">H</a>       
00048         };
00049 
00050         <span class="keyword">protected</span>:
<a name="l00051"></a><a class="code" href="classTApplication.html#p0">00051</a>                 <a class="code" href="classTEngine.html">TEngine&lt;T&gt;</a> *<a class="code" href="classTApplication.html#p0">engine</a>;     
<a name="l00052"></a><a class="code" href="classTApplication.html#p1">00052</a>                 <span class="keywordtype">char</span> <a class="code" href="classTApplication.html#p1">iFile</a>[255];        
<a name="l00053"></a><a class="code" href="classTApplication.html#p2">00053</a>                 <span class="keywordtype">char</span> <a class="code" href="classTApplication.html#p2">sFile</a>[255];        
<a name="l00054"></a><a class="code" href="classTApplication.html#p3">00054</a>                 <span class="keywordtype">char</span> **<a class="code" href="classTApplication.html#p3">argumentos</a>;      
<a name="l00055"></a><a class="code" href="classTApplication.html#p4">00055</a>                 FILE *<a class="code" href="classTApplication.html#p4">input</a>;            
<a name="l00056"></a><a class="code" href="classTApplication.html#p5">00056</a>                 FILE *<a class="code" href="classTApplication.html#p5">search</a>;           
<a name="l00057"></a><a class="code" href="classTApplication.html#p6">00057</a>                 <a class="code" href="classTApplication.html#y5">tipo_estrutura</a> <a class="code" href="classTApplication.html#p6">tipo</a>;    
00060         <span class="keyword">public</span>:
00066                 <a class="code" href="classTApplication.html#a0">~TApplication</a>();
00067 
00073                 <span class="keywordtype">void</span> <a class="code" href="classTApplication.html#a1">Init</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]);
00074                 
00078                 <span class="keywordtype">void</span> <a class="code" href="classTApplication.html#a2">ShowUsage</a>();
00079                 
00085                  <span class="keywordtype">bool</span> <a class="code" href="classTApplication.html#a3">ValidaTipoEstrutura</a>();
00086 
00092                  <span class="keywordtype">bool</span> <a class="code" href="classTApplication.html#a4">ValidaArquivoInput</a>();
00093                  
00099                  <span class="keywordtype">bool</span> <a class="code" href="classTApplication.html#a5">ValidaArquivoSearch</a>();
00100 
00106                  <span class="keywordtype">bool</span> <a class="code" href="classTApplication.html#a6">InitEngine</a>();
00107 
00113                  <span class="keywordtype">bool</span> <a class="code" href="classTApplication.html#a7">ProcessaInput</a>();
00114                  
00120                  <span class="keywordtype">bool</span> <a class="code" href="classTApplication.html#a8">ProcessaSearch</a>();
00121 };
00122 
00123 
00124 
00125 
00126 
<a name="l00127"></a><a class="code" href="classTApplication.html#a1">00127</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">void</span> <a class="code" href="classTApplication.html">TApplication&lt;T&gt;::Init</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])
00128 {
00129         <span class="comment">//Aponta para os argumentos</span>
00130         <a class="code" href="classTApplication.html#p3">argumentos</a> = argv;
00131 
00132         <span class="comment">//Verifica se o programa foi chamado da maneira correta</span>
00133         <span class="keywordflow">if</span>(argc &lt; 4 || !strcmp(argv[1], <span class="stringliteral">"--help"</span>))
00134         {
00135                 <a class="code" href="classTApplication.html#a2">ShowUsage</a>();
00136                 exit(0);
00137         }
00138 }
00139 
00140 
00141 
<a name="l00142"></a><a class="code" href="classTApplication.html#a2">00142</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">void</span> <a class="code" href="classTApplication.html#a2">TApplication&lt;T&gt;::ShowUsage</a>()
00143 {
00144         std::cerr
00145                 &lt;&lt; <span class="stringliteral">"Uso: "</span>&lt;&lt; <a class="code" href="classTApplication.html#p3">argumentos</a>[0] &lt;&lt; <span class="stringliteral">" ESTRUTURA INPUT.txt BUSCA.txt"</span> &lt;&lt; std::endl &lt;&lt; std::endl
00146                 &lt;&lt; <span class="stringliteral">"ESTUTURA:"</span> &lt;&lt; std::endl
00147                 &lt;&lt; <span class="stringliteral">"\t -l \t TList"</span> &lt;&lt; std::endl
00148                 &lt;&lt; <span class="stringliteral">"\t -sl \t TSortedList"</span> &lt;&lt; std::endl
00149                 &lt;&lt; <span class="stringliteral">"\t -s \t TStack"</span> &lt;&lt; std::endl
00150                 &lt;&lt; <span class="stringliteral">"\t -q \t TQueue"</span> &lt;&lt; std::endl
00151                 &lt;&lt; <span class="stringliteral">"\t -h \t THash"</span> &lt;&lt; std::endl;
00152 }
00153 
00154 
00155 
<a name="l00156"></a><a class="code" href="classTApplication.html#a3">00156</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">bool</span> <a class="code" href="classTApplication.html#a3">TApplication&lt;T&gt;::ValidaTipoEstrutura</a>()
00157 {
00158         <span class="comment">//Instancia o objeto</span>
00159         <span class="keywordflow">if</span>(!strcmp(<a class="code" href="classTApplication.html#p3">argumentos</a>[1], <span class="stringliteral">"-l"</span>))
00160         {
00161                 <a class="code" href="classTApplication.html#p6">tipo</a> = <a class="code" href="classTApplication.html#y5y0">L</a>;
00162         }
00163         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(<a class="code" href="classTApplication.html#p3">argumentos</a>[1], <span class="stringliteral">"-sl"</span>))
00164         {
00165                 <a class="code" href="classTApplication.html#p6">tipo</a> = <a class="code" href="classTApplication.html#y5y1">SL</a>;
00166         }
00167         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(<a class="code" href="classTApplication.html#p3">argumentos</a>[1], <span class="stringliteral">"-s"</span>))
00168         {
00169                 <a class="code" href="classTApplication.html#p6">tipo</a> = <a class="code" href="classTApplication.html#y5y2">S</a>;
00170         }
00171         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(<a class="code" href="classTApplication.html#p3">argumentos</a>[1], <span class="stringliteral">"-q"</span>))
00172         {
00173                 <a class="code" href="classTApplication.html#p6">tipo</a> = <a class="code" href="classTApplication.html#y5y3">Q</a>;
00174         }
00175         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(<a class="code" href="classTApplication.html#p3">argumentos</a>[1], <span class="stringliteral">"-h"</span>))
00176         {
00177                 <a class="code" href="classTApplication.html#p6">tipo</a> = <a class="code" href="classTApplication.html#y5y4">H</a>;
00178         }
00179         <span class="keywordflow">else</span>
00180         {
00181                 <span class="keyword">const</span> <span class="keywordtype">char</span> *txt_erro = <span class="stringliteral">"ESTRUTURA inválida: "</span>;
00182                 <span class="keywordtype">int</span> tamanho = strlen(txt_erro) + strlen(<a class="code" href="classTApplication.html#p3">argumentos</a>[1]);
00183 
00184                 <span class="keywordtype">char</span> msg_erro[++tamanho];
00185 
00186                 <a class="code" href="classTEGeneralError.html">TEGeneralError</a> *ErrorHandler = <span class="keyword">new</span> <a class="code" href="classTEGeneralError.html">TEGeneralError</a>(<a class="code" href="classTApplication.html#p3">argumentos</a>[0], strcat(strcpy(msg_erro, txt_erro), <a class="code" href="classTApplication.html#p3">argumentos</a>[1]));
00187                 ErrorHandler-&gt;<a class="code" href="classTEGeneralError.html#a4">Exit</a>(1);
00188         }
00189         
00190         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00191 }
00192 
<a name="l00193"></a><a class="code" href="classTApplication.html#a4">00193</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">bool</span> <a class="code" href="classTApplication.html#a4">TApplication&lt;T&gt;::ValidaArquivoInput</a>()
00194 {
00195         <span class="comment">//Abre o arquivo</span>
00196         <span class="keywordflow">if</span>(strlen(<a class="code" href="classTApplication.html#p3">argumentos</a>[2]))
00197         {
00198                 <span class="keywordflow">if</span> ( (<a class="code" href="classTApplication.html#p4">input</a> = fopen(<a class="code" href="classTApplication.html#p3">argumentos</a>[2], <span class="stringliteral">"r"</span>)) == NULL )
00199                 {
00200                         <span class="keyword">const</span> <span class="keywordtype">char</span> *txt_erro = <span class="stringliteral">"Erro ao abrir o arquivo INPUT: "</span>;
00201                         <span class="keywordtype">int</span> tamanho = strlen(txt_erro) + strlen(<a class="code" href="classTApplication.html#p3">argumentos</a>[2]);
00202                         
00203                         <span class="keywordtype">char</span> msg_erro[++tamanho];
00204                 
00205                         <a class="code" href="classTEGeneralError.html">TEGeneralError</a> *ErrorHandler = <span class="keyword">new</span> <a class="code" href="classTEGeneralError.html">TEGeneralError</a>(<a class="code" href="classTApplication.html#p3">argumentos</a>[0], strcat(strcpy(msg_erro, txt_erro), <a class="code" href="classTApplication.html#p3">argumentos</a>[2]));
00206                         ErrorHandler-&gt;<a class="code" href="classTEGeneralError.html#a4">Exit</a>(2);
00207 
00208                 }
00209 
00210                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00211         }
00212         <span class="keywordflow">else</span>
00213         {
00214                 <a class="code" href="classTApplication.html#a2">ShowUsage</a>();
00215         }
00216 }
00217 
00218 
00219 
<a name="l00220"></a><a class="code" href="classTApplication.html#a5">00220</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">bool</span> <a class="code" href="classTApplication.html#a5">TApplication&lt;T&gt;::ValidaArquivoSearch</a>()
00221 {
00222         <span class="comment">//Abre o arquivo</span>
00223         <span class="keywordflow">if</span>(strlen(<a class="code" href="classTApplication.html#p3">argumentos</a>[3]))
00224         {
00225                 <span class="keywordflow">if</span> ( (<a class="code" href="classTApplication.html#p5">search</a> = fopen(<a class="code" href="classTApplication.html#p3">argumentos</a>[3], <span class="stringliteral">"r"</span>)) == NULL )
00226                 {
00227                         <span class="keyword">const</span> <span class="keywordtype">char</span> *txt_erro = <span class="stringliteral">"Erro ao abrir o arquivo SEARCH: "</span>;
00228                         <span class="keywordtype">int</span> tamanho = strlen(txt_erro) + strlen(<a class="code" href="classTApplication.html#p3">argumentos</a>[3]);
00229                         
00230                         <span class="keywordtype">char</span> msg_erro[++tamanho];
00231                 
00232                         <a class="code" href="classTEGeneralError.html">TEGeneralError</a> *ErrorHandler = <span class="keyword">new</span> <a class="code" href="classTEGeneralError.html">TEGeneralError</a>(<a class="code" href="classTApplication.html#p3">argumentos</a>[0], strcat(strcpy(msg_erro, txt_erro), <a class="code" href="classTApplication.html#p3">argumentos</a>[3]));
00233                         ErrorHandler-&gt;<a class="code" href="classTEGeneralError.html#a4">Exit</a>(3);
00234                 }
00235 
00236                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00237         }
00238         <span class="keywordflow">else</span>
00239         {
00240                 <a class="code" href="classTApplication.html#a2">ShowUsage</a>();
00241         }
00242 }
00243 
00244 
00245 
<a name="l00246"></a><a class="code" href="classTApplication.html#a6">00246</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">bool</span> <a class="code" href="classTApplication.html#a6">TApplication&lt;T&gt;::InitEngine</a>()
00247 {
00248         <span class="comment">//Instancia a engine adequada</span>
00249         <span class="keywordflow">switch</span>(<a class="code" href="classTApplication.html#p6">tipo</a>)
00250         {
00251                 <span class="comment">//Lista</span>
00252                 <span class="keywordflow">case</span> <a class="code" href="classTApplication.html#y5y0">L</a>:
00253                   <a class="code" href="classTApplication.html#p0">engine</a> = <span class="keyword">new</span> <a class="code" href="classTEngineTList.html">TEngineTList&lt;T&gt;</a>(<span class="keyword">new</span> <a class="code" href="classTList.html">TList&lt;T&gt;</a>);
00254                 <span class="keywordflow">break</span>;
00255 
00256                 <span class="comment">//Lista Ordenada</span>
00257                 <span class="keywordflow">case</span> <a class="code" href="classTApplication.html#y5y1">SL</a>:
00258                   <a class="code" href="classTApplication.html#p0">engine</a> = <span class="keyword">new</span> <a class="code" href="classTEngineTSortedList.html">TEngineTSortedList&lt;T&gt;</a>(<span class="keyword">new</span> <a class="code" href="classTSortedList.html">TSortedList&lt;T&gt;</a>);
00259                 <span class="keywordflow">break</span>;
00260 
00261                 <span class="comment">//Pilha</span>
00262                 <span class="keywordflow">case</span> <a class="code" href="classTApplication.html#y5y2">S</a>:
00263                   <a class="code" href="classTApplication.html#p0">engine</a> = <span class="keyword">new</span> <a class="code" href="classTEngineTStack.html">TEngineTStack&lt;T&gt;</a>(<span class="keyword">new</span> <a class="code" href="classTStack.html">TStack&lt;T&gt;</a>);
00264                 <span class="keywordflow">break</span>;
00265 
00266                 <span class="comment">//Fila</span>
00267                 <span class="keywordflow">case</span> <a class="code" href="classTApplication.html#y5y3">Q</a>:
00268                   <a class="code" href="classTApplication.html#p0">engine</a> = <span class="keyword">new</span> <a class="code" href="classTEngineTQueue.html">TEngineTQueue&lt;T&gt;</a>(<span class="keyword">new</span> <a class="code" href="classTQueue.html">TQueue&lt;T&gt;</a>);
00269                 <span class="keywordflow">break</span>;
00270 
00271                 <span class="comment">//Tabela Hash</span>
00272                 <span class="keywordflow">case</span> <a class="code" href="classTApplication.html#y5y4">H</a>:
00273                   <span class="comment">//Obtem o numero de elementos que a tabela armazenará</span>
00274                   <span class="comment">//Gera um tamanho levemente menor que o numero de entradas, para fins demonstrativos do espalhamento</span>
00275                   <span class="keywordtype">int</span> tamanho;
00276                   fscanf(<a class="code" href="classTApplication.html#p4">input</a>, <span class="stringliteral">"%d"</span>, &amp;tamanho);
00277                   tamanho -= (<span class="keywordtype">int</span>) floor(log10(tamanho));
00278 
00279                   <a class="code" href="classTApplication.html#p0">engine</a> = <span class="keyword">new</span> <a class="code" href="classTEngineTHashTable.html">TEngineTHashTable&lt;T&gt;</a>(<span class="keyword">new</span> <a class="code" href="classTHashTable.html">THashTable&lt;T&gt;</a>(tamanho));
00280                   
00281                   <span class="comment">//reaponta o arquivo para o inicio</span>
00282                   rewind(<a class="code" href="classTApplication.html#p4">input</a>);
00283                 <span class="keywordflow">break</span>;
00284 
00285                 <span class="comment">//Nada (impossivel, mas ... )</span>
00286                 <span class="keywordflow">default</span>:
00287                   <span class="keywordflow">return</span> <span class="keyword">false</span>;
00288                 <span class="keywordflow">break</span>;
00289         }
00290 }
00291 
00292 
00293 
<a name="l00294"></a><a class="code" href="classTApplication.html#a7">00294</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">bool</span> <a class="code" href="classTApplication.html#a7">TApplication&lt;T&gt;::ProcessaInput</a>()
00295 {
00296         <span class="comment">//Obtem o numero de comandos</span>
00297         <span class="keywordtype">int</span> numRegistros;
00298         fscanf(<a class="code" href="classTApplication.html#p4">input</a>, <span class="stringliteral">"%d"</span>, &amp;numRegistros);
00299 
00300 <span class="preprocessor">#ifdef DEBUG</span>
00301 <span class="preprocessor"></span>std::cerr &lt;&lt; numRegistros &lt;&lt; <span class="stringliteral">" inputs "</span> &lt;&lt; endl;
00302 <span class="preprocessor">#endif</span>
00303 <span class="preprocessor"></span>
00304         <span class="comment">//Processa o input</span>
00305         <span class="keywordflow">for</span>(; numRegistros &gt; 0; numRegistros--)
00306         {
00307                 <span class="comment">//Cria o elemento</span>
00308                 T *elemento = <span class="keyword">new</span> T();
00309                 
00310                 <span class="comment">//Le a linha</span>
00311                 <span class="keywordtype">int</span> posicao, codigo;
00312                 <span class="keywordtype">char</span> nome[255];
00313                 fscanf(<a class="code" href="classTApplication.html#p4">input</a>, <span class="stringliteral">"%d\t%d\t%255[^\n]\n"</span>, &amp;posicao, &amp;codigo, &amp;nome);
00314         
00315                 <span class="comment">//Preenche o elemento   </span>
00316                 elemento-&gt;SetCodigo(codigo);
00317                 elemento-&gt;SetNome(nome);
00318 
00319 <span class="preprocessor">#ifdef DEBUG</span>
00320 <span class="preprocessor"></span>std::cerr &lt;&lt; <span class="stringliteral">"[pos "</span> &lt;&lt; posicao &lt;&lt; <span class="stringliteral">"]\t["</span> &lt;&lt; elemento &lt;&lt; <span class="stringliteral">"]\t"</span> &lt;&lt; *elemento &lt;&lt; std::endl;
00321 <span class="preprocessor">#endif</span>
00322 <span class="preprocessor"></span>                <span class="keywordflow">try</span> {
00323                         <a class="code" href="classTApplication.html#p0">engine</a>-&gt;InsereElemento(posicao, elemento);
00324                 }
00325                 <span class="keywordflow">catch</span>(<a class="code" href="classTEGeneralError.html">TEGeneralError</a> *Error)
00326                 {
00327                         Error-&gt;toString();
00328                 }
00329         }
00330 
00331 
00332 <span class="preprocessor">#ifdef DEBUG</span>
00333 <span class="preprocessor"></span>std::cerr &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">"Após as inserções: "</span> &lt;&lt; std::endl;
00334 <a class="code" href="classTApplication.html#p0">engine</a>-&gt;dump();
00335 <span class="preprocessor">#endif</span>
00336 <span class="preprocessor"></span>        
00337         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00338 }
00339 
<a name="l00340"></a><a class="code" href="classTApplication.html#a8">00340</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">bool</span> <a class="code" href="classTApplication.html#a8">TApplication&lt;T&gt;::ProcessaSearch</a>()
00341 {
00342         <span class="comment">//Obtem o numero de comandos</span>
00343         <span class="keywordtype">int</span> numOperacoes;
00344         fscanf(<a class="code" href="classTApplication.html#p5">search</a>, <span class="stringliteral">"%d\n"</span>, &amp;numOperacoes);
00345 
00346         <span class="comment">//Numero de intens nao encontrados</span>
00347         <span class="keywordtype">int</span> naoEncontrados = 0;
00348 
00349 <span class="preprocessor">#ifdef DEBUG</span>
00350 <span class="preprocessor"></span>std::cerr &lt;&lt; endl &lt;&lt; numOperacoes &lt;&lt; <span class="stringliteral">" searchs "</span> &lt;&lt; endl;
00351 <span class="preprocessor">#endif</span>
00352 <span class="preprocessor"></span>
00353         <span class="comment">//Processa o input</span>
00354         <span class="keywordflow">for</span>(; numOperacoes &gt; 0; numOperacoes--)
00355         {
00356                 <span class="comment">//Cria o elemento</span>
00357                 T *elemento = <span class="keyword">new</span> T();
00358                 
00359                 <span class="comment">//Le a linha</span>
00360                 <span class="keywordtype">int</span> codigo;
00361                 fscanf(<a class="code" href="classTApplication.html#p5">search</a>, <span class="stringliteral">"%d\n"</span>, &amp;codigo);
00362         
00363                 <span class="comment">//Preenche o elemento   </span>
00364                 elemento-&gt;SetCodigo(codigo);
00365 
00366 <span class="preprocessor">#ifdef DEBUG</span>
00367 <span class="preprocessor"></span>std::cerr &lt;&lt; <span class="stringliteral">"["</span> &lt;&lt; elemento &lt;&lt; <span class="stringliteral">"]\t"</span> &lt;&lt; *elemento &lt;&lt; std::endl;
00368 <span class="preprocessor">#endif</span>
00369 <span class="preprocessor"></span>
00370                 <span class="keywordflow">try</span> {
00371                         <span class="comment">//Procura o elemento</span>
00372                         <span class="keywordflow">if</span> (NULL != (elemento = <a class="code" href="classTApplication.html#p0">engine</a>-&gt;ProcuraElemento(elemento)) )
00373                         {
00374                                 <span class="comment">//Estranho.. Utilizando a otimização (g++ -O3 [...] ) de repente isso havia parado de funcionar :-D</span>
00375                                 <span class="comment">//Desabilitei a otimização e foi...</span>
00376                 
00377                                 <span class="comment">//Encontrou</span>
00378                                 std::cout &lt;&lt; *elemento &lt;&lt; std::endl;
00379                         }
00380                         <span class="keywordflow">else</span>
00381                         {
00382                                 <span class="comment">//Nao encontrou</span>
00383                                 std::cout &lt;&lt; codigo &lt;&lt; <span class="stringliteral">" - [Item not found]"</span> &lt;&lt; std::endl;
00384                                 naoEncontrados++;
00385                         }
00386                 }
00387                 <span class="keywordflow">catch</span>(<a class="code" href="classTEGeneralError.html">TEGeneralError</a> *Error)
00388                 {
00389                         Error-&gt;toString();
00390                 }
00391         }
00392 
00393         <span class="comment">//Numero de itens nao encotrados</span>
00394         std::cout &lt;&lt; <span class="stringliteral">"=&gt; "</span> &lt;&lt; naoEncontrados &lt;&lt; <span class="stringliteral">" item(s) not found."</span> &lt;&lt; std::endl;
00395 
00396         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00397 }
00398 
00399 
<a name="l00400"></a><a class="code" href="classTApplication.html#a0">00400</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <a class="code" href="classTApplication.html#a0">TApplication&lt;T&gt;::~TApplication</a>()
00401 {
00402         <span class="comment">//Fecha os arquivos</span>
00403         fclose(<a class="code" href="classTApplication.html#p4">input</a>);
00404         fclose(<a class="code" href="classTApplication.html#p5">search</a>);
00405 
00406         <span class="comment">//Limpa a engine</span>
00407         <a class="code" href="classTApplication.html#p0">engine</a>-&gt;clean();
00408 }
00409 
00410 <span class="preprocessor">#endif</span>
</div></pre><hr size="1"><address style="align: right;"><small>Gerado em Tue Jun 7 22:36:05 2005 para Estrutura de Dados - Trabalho 1 por
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
